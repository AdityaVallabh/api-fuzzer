
# Example test plan
---
get pet by status:
  - path: /pet/findByStatus
    method: get
    queryParams:
      status: sold

---
# In this example, a user has attributes name, address, phone, id (returned by post)
create user manual:
  - path: /user
    method: post
    bodyParams:
      username: johnsmith
      phone: 888-888-8888

---
create user auto:
  - path: /user
    method: post

---
get user auto:
  - path: /user/{username}
    method: get

---
get user:
  - path: /user/{username}
    method: get
    pathParams:
      username: johnsmith

--- 
update user:
  - path: /user/{username}
    method: put
    pathParams:
      username: johnsmith
    bodyParams:
      username: johnsmith
      phone: 666-666-6666

---
get user after update:
  - path: /user/{username}
    method: get
    pathParams:
      username: johnsmith

---
delete user:
  - path: /user/{username}
    method: delete
    pathParams:
      username: johnsmith

---
get user after delete:
  - path: /user/{username}
    method: get
    pathParams:
      username: johnsmith
    expect:
      status: 404

---
auto test:
  - ref: create user auto
  - ref: get user
  - ref: update user
  - ref: delete user
  
---
create 2 delete 1:
  - name: create1
    ref: create user auto
    bodyParams:
      address: fixed address
      name: fixed name
  - name: create2
    ref: create user auto
    bodyParams:
      name: fixed user name
  - ref: get all users
  - ref: get user
    pathParams:
      user_id: "%create1.id%"
  - ref: delete user
    pathParams:
      user_id: "%create1.id%"
  - ref: get user
    pathParams:
      user_id: "%create1.id%"
    expects:
      status: fail

---
crud:
  - name: create
    ref: create user auto
  - name: read
    ref: get user
    pathParams:
      user_id: "%create.id%"
  - name: update
    ref: update user
    pathParams:
      user_id: "%create.id%"
  - name: delete
    ref: delete user
    pathParams:
      user_id: "%create.id%"
  - name: read
    ref: get user
    pathParams:
      user_id: "%create.id%"
    expects:
      status: fail

---
update pet:
  - path: "/pet/{petId}"
    method: post
    pathParams:
      petId: auto # get one from DB
    formParams:
      name: new name from update pet
      status: sold
    bodyParams: # this forces body to be empty, even if there is a body in spec.

# The rule is, the parameter section should mostly be a map, with the exception
# of the bodyParams, which can be anything.